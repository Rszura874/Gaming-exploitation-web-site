<?php
	$link = mysqli_connect("localhost", "assist", "assist");
	//If connection fails, tell the user
	if (!$link) {
		echo( "<P>Unable to connect to the " .
			"database server at this time.</P>" );
		exit();
	}
	
	//Database/Table creation
	$exists = "CREATE DATABASE IF NOT EXISTS games";
	
	$result = mysqli_query($link, $exists)
			or die('Invalid query: ' . mysqli_error($link));
	
	
	$query2 = <<<EOD
	USE games;

	CREATE TABLE IF NOT EXISTS game_list
	(
		id int(11) NOT NULL AUTO_INCREMENT,
		game_name varchar(50),
		genre varchar(30),
		cheat_url varchar(60),
		exploit_url varchar(60),
		PRIMARY KEY(id)
	);

	INSERT INTO game_list (id, game_name, genre, cheat_url, exploit_url) VALUES
	(1, 'Final Fantasy XIII-2', 'RPG', 'ffXIII-2_cheat.txt', 'ffXIII-2_exploit.txt');
	INSERT INTO game_list (id, game_name, genre) VAlUES
	(2, 'Skyrim', 'RPG'),
	(3, 'Runescape', 'MMO RPG'),
	(4, 'Left 4 Dead', 'Shooter'),
	(5, 'Left 4 Dead 2', 'Shooter'),
	(6, 'Guitar Hero 3: Legends of Rock', 'Music'),
	(7, 'Rock Band','Music'),
	(8, 'Rock Band 2', 'Music'),
	(9, 'Disgaea 4', 'RPG'),
	(10, 'Demon Souls', 'RPG'),
	(11, 'Kingdom Hearts Birth by Sleep', 'RPG'),
	(12, 'Halo Reach', 'Shooter'),
	(13, 'Assassin\'s Creed', 'Action, Adventure');

	CREATE TABLE IF NOT EXISTS	users
	(
		id int(11) NOT NULL AUTO_INCREMENT,
		username varchar(50),
		firstname varchar(50),
		lastname varchar(50),
		password varchar(50),
		PRIMARY KEY(id)
	);

	CREATE TABLE IF NOT EXISTS favorites
	(
		user_id int(11),
		game_name varchar(50),
		FOREIGN KEY (user_id)
		REFERENCES users (id)
	);
	
EOD;
		$result2 = mysqli_multi_query($link, $query2)
			or die('Invalid query: ' . mysqli_error($link));
			
?>
<html>
<div align=center>Thanks for installing! <br/>

<!-- Homepage button -->
<form method="post" action="home.php">
	<input type="submit" value="Go To Homepage" name="submit" />
</form>
</div>
</html>